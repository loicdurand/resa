{% extends 'base.html.twig' %}

{% block body %}

	<div class="fr-notice fr-notice--info">
		<div class="fr-container">

			{% for role_key, role in roles %}
				<div class="fr-notice__body fr-mt-4w">
					<p>
						<span class="fr-notice__title">Rôle "{{role.libelle}}"</span>
						<span class="fr-notice__desc">Les champs ci-dessous ne sont accessibles qu'aux personnels ayant ce rôle particulier.</span>
					</p>
					<button title="Masquer le message" onclick="const notice = this.parentNode; notice.style.display = 'none';" class="fr-btn--close fr-btn">Masquer le message</button>
				</div>

				<div class="fr-accordions-group">

					{% for perm_key, perm in role.permissions %}
						<section class="fr-accordion">
							<h3 class="fr-accordion__title">
								<button class="fr-accordion__btn" aria-expanded="false" aria-controls="accordion-{{role_key ~ perm_key}}">{{perm.action.libelle}}</button>
							</h3>
							<div
								class="fr-collapse" id="accordion-{{role_key ~ perm_key}}">
								<!-- données de test -->
								{% if perm.action.template is null %}

									<h4 class="fr-h4">Pas encore de contenu</h4>
									<p class="fr-mt-2w">
									Cette page est en cours de conctruction. Nous vous invitons à revenir ultérieurement.
								</p>

								{% else %}

									{{ include(perm.action.template) }}

								{% endif %}
								
							</div>
						</section>
					{% endfor %}

				</div>
			{% endfor %}
		</div>
	</div>

{% endblock %}
